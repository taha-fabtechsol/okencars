{% load static %} {% include 'backoffice/sidebar.html' %}

<div class="right-content ms-auto px-md-4" style="background-color: #e5f1f0 !important;">
  <div class="area-height">
    <div class="container mt-5">
        <div class="d-flex justify-content-between align-items-center">
            <div class="left">
        <h2>Add User</h2>
        <p>We'll employ these requirement details to accurately verify your users details.</p>
    </div>
</div>
<form class="mt-2" id="vehicleForm" method="post" enctype="multipart/form-data">
    {% if messages %}
        <div class="messages mt-2 mb-2">
            {% for message in messages %}
            <div class="alert {{ message.tags }} alert-dismissible" role="alert">{{ message }}</div>
            {% endfor %}
        </div>
    {% endif %}
    <div class="d-flex justify-content-between">

        <h4>User Details</h4>
        <div class="right p-3">
            <button type="submit" id="save-btn" class="btn btn-secondary">Update Profile</button>
        </div>
    </div>    
            {% csrf_token %}
            <div class="row">
              
                <div class="col-4">
                  <div class="d-flex flex-column">
                    <label for="">First Name</label>
                    <input class="form-control" placeholder="Enter your last name" type="text" name="first_name" value="{{obj.first_name}}" required>
                </div>
                </div>

                <div class="col-4">
                  <div class="d-flex flex-column">
                    <label for="">Last Name</label>
                    <input class="form-control" placeholder="Enter your last name" type="text" name="last_name" value="{{obj.last_name}}" required>
                </div>
                </div>

                <div class="col-4">
                  <div class="d-flex flex-column">
                    <label for="">Email </label>
                    <input readonly disabled class="form-control" placeholder="Enter your email" type="email" name="email" value="{{obj.email}}" required>
                </div>
                </div>


                <div class="col-4 mt-3">
                  <div class="d-flex flex-column">
                    <label for="">Date of Birth </label>
                    <input class="form-control" type="date" name="dob" value="{{obj.dob|date:'Y-m-d'}}" required>
                </div>
                </div>

                <div class="col-4 mt-3">
                  <div class="d-flex flex-column">
                    <label for="">License Number </label>
                    <input class="form-control" placeholder="License Number" type="text" name="license_number" value="{{obj.license_number}}" required>
                </div>
                </div>

                <div class="col-4 mt-3">
                  <div class="d-flex flex-column">
                    <label for="">License Issuing Country </label>
                    <input class="form-control" placeholder="License Issuing Country" type="text" name="license_issuing_country" value="{{obj.license_issuing_country}}" required>
                </div>
                </div>
                
                <div class="col-4 mt-3">
                  <div class="d-flex flex-column">
                    <label for="">Phone Number </label>
                    <input type="tel" placeholder="Enter your number" name="phone_number" value="{{obj.phone_number}}" class="form-control">
                </div>
                </div>
                {% if not obj == user %}
                <div class="col-4 mt-3">
                  <div class="d-flex flex-column">
                    <label for="">Role </label>
                    <select name="role" id="" class="form-control">
                      {% if user.role == "Admin" %}
                      <option {% if obj.role ==  "Admin" %}  selected {% endif %} value="Admin">Admin</option>
                      {% endif %}
                      <option {% if obj.role == "Owner"  %} selected {% endif %} value="Owner">Owner</option>
                      <option {% if obj.role == "Manager"  %} selected {% endif %} value="Manager">Manager</option>
                      <option {% if obj.role == "Driver"  %} selected {% endif %} value="Driver">Driver</option>
                    </select>
                </div>
                </div>
                {% endif %}
                <div class="col-4 mt-3">
                  <div class="d-flex flex-column">
                    <label for="">Password </label>
                    <input class="form-control" placeholder="********" type="password" name="password" >
                </div>
                </div>


                <div class="col-12 mt-3">
                  <h4>Address</h4>
                </div>

                <div class="col-8 mt-3">
                  <div class="d-flex flex-column">
                    <label for="">Address</label>
                    <input class="form-control" placeholder="Capitaine Jean Luc PICARD 52 RUE DES FLEURS " type="text" name="address" value="{{obj.address}}" required>
                </div>
                </div>

                <div class="col-4 mt-3">
                  <div class="d-flex flex-column">
                    <label for="">City </label>
                    <input class="form-control" placeholder="city" type="text" name="city" value="{{obj.city}}" required>
                </div>
                </div>


                <div class="col-4 mt-3">
                  <div class="d-flex flex-column">
                    <label for="">Postal Code </label>
                    <input class="form-control" placeholder="Postal code" type="text" name="postal_code" value="{{obj.postal_code}}" required>
                </div>
                </div>

                <div class="col-4 mt-3">
                  <div class="d-flex flex-column">
                    <label for="">Country </label>
                    <input class="form-control" placeholder="Country" type="text" name="country" value="{{obj.country}}" required>
                </div>
                </div>


                <div class="col-4 mt-3">
                  <div class="d-flex flex-column">
                    <label for="">State </label>
                    <input class="form-control" placeholder="State" type="text" name="state" value="{{obj.state}}" required>
                </div>
                </div>

                <div class="col-12 mt-3">
                  <h4>Profile Photo</h4>
                </div>


                <div class="col-2">
                  <label for="fileImg" class="form-label">
                    <div id="uploadBox" class="upload-box d-flex justify-content-center align-items-center">
                      <i id="upload-icon" class="d-none fa-solid fa-arrow-up-from-bracket"></i>
                      <img src="{{obj.dp.url}}" width="100%" height="100%" id="set-img" class="" style="object-fit: cover;" alt="">
                    </div>
                    <p id="dp_error" class="error_message"></p>
                  </label>
                  <input hidden onchange="loadFile2(event)" class="form-control shadow-none" type="file" name="dp" id="fileImg" style="width: 200px; object-fit: cover;" accept="image/*">
              </div>

              </div>
        </form>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.3/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
  </div>
</div>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
<script>
    // activeTab("vehicles")
    function loadFile2(event) {
        let new_image = document.getElementById("set-img")
        const file =  URL.createObjectURL(event.target.files[0])
        new_image.src = file
    }
  </script>
<style>
    .upload-box{
    width: 150px;
    height: 150px;
    border: 1px dashed black;
    background-color: white;
}
</style>
</html>
<script>
  function togglePasswordVisibility() {
    var passwordField = document.getElementById("password");
    var togglePassword = document.getElementById("togglePassword");
    if (passwordField.type === "password") {
      passwordField.type = "text";
      togglePassword.className = "bi bi-eye-slash";
    } else {
      passwordField.type = "password";
      togglePassword.className = "bi bi-eye";
    }
  }

    activeTab("users")
</script>
